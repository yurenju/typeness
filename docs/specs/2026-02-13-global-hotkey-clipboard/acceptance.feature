# language: zh-TW
功能: 全域快捷鍵語音輸入與自動貼上
  作為 Typeness 使用者
  我想要在任何應用程式中按右 Alt 鍵觸發語音輸入
  以便 辨識後的文字自動貼上到當前游標位置

  背景:
    假設 Typeness 程式已啟動且模型載入完成
    並且 終端機顯示「就緒」訊息，提示可按右 Alt 開始語音輸入

  場景: 程式啟動就緒
    假設 使用者在終端機中執行 Typeness 程式
    當 Whisper 和 LLM 模型載入完成
    那麼 終端機應顯示就緒訊息
    並且 提示使用者可按右 Alt 開始語音輸入

  場景: 在瀏覽器中語音輸入並自動貼上
    假設 使用者已開啟瀏覽器並將游標點在搜尋框中
    當 使用者按下右 Alt 鍵
    那麼 終端機應顯示「錄音中」的 log
    當 使用者說一段 5-10 秒的繁體中文語音
    並且 使用者再按一次右 Alt 鍵
    那麼 終端機應顯示「停止錄音」的 log
    並且 系統應執行 Whisper 辨識和 LLM 後處理
    並且 處理後的文字應自動出現在瀏覽器的搜尋框中
    並且 終端機應顯示處理時間統計

  場景: 在 VS Code 編輯器中語音輸入並自動貼上
    假設 使用者已開啟 VS Code 並將游標放在編輯區域
    當 使用者按下右 Alt 鍵開始錄音
    並且 使用者說一段繁體中文語音
    並且 使用者再按一次右 Alt 鍵停止錄音
    那麼 處理後的文字應自動出現在 VS Code 的游標位置

  場景: 剪貼簿內容正確
    假設 使用者已完成一次語音輸入流程
    當 使用者在記事本中按 Ctrl+V
    那麼 貼上的內容應與自動貼上到焦點視窗的內容相同
    並且 內容應為 LLM 處理後的最終文字

  場景: 連續兩次語音輸入
    假設 使用者已完成第一次語音輸入且文字已自動貼上
    當 使用者再按一次右 Alt 鍵開始第二次錄音
    並且 使用者說另一段繁體中文語音
    並且 使用者再按一次右 Alt 鍵停止錄音
    那麼 第二次處理後的文字應自動貼上到當前焦點位置
    並且 兩次輸入都應正確完成

  場景: Alt 組合鍵不受干擾
    假設 Typeness 程式正在運行
    當 使用者按 Alt+Tab 切換視窗
    那麼 Alt+Tab 應正常運作
    並且 不應觸發 Typeness 的錄音功能

  場景: 優雅退出
    假設 Typeness 程式正在運行
    當 使用者在終端機中按 Ctrl+C
    那麼 程式應正常結束
    並且 全域鍵盤 hook 應被清除
    並且 右 Alt 鍵應恢復正常功能
